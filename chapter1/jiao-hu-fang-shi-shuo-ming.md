# 交互方式说明

S系列IPPBX和应用服务器使用HTTPS作为传输协议，向对方发送请求，并接收对方回复的HTTPS响应。S系列IPPBX和应用服务器之间的交互为相互的，双方互为服务端和客户端。

#### **交互协议**

默认交互协议使用HTTPS。默认采取与访问网页同样的证书。这里建议用户更换为专业证书机构制作的证书。

#### **传输的内容**

使用.json定义的文本。

#### **交互方式**

S系列IPPBX与应用服务器交互有两种方式。

一、应用服务器向S系列IPPBX发送请求

应用服务器为客户端，S系列IPPBX为服务端。以下为该种方式交互的使用场景：应用服务器向S系列IPPBX发起呼叫、查询。

说明：所有API请求都需带上API登录验证时所返回的的Token，即API的调用接口凭证。并且该token有效时长为30分钟，30分钟内如果API和第三方应用没有任何事件交互（如：第三方应用向IPPBX发送API请求；API向第三方应用发送事件报告），则该token将被IPPBX系统清除。第三方应用可通过心跳包接口向IPPBX发送心跳包的方式更新token的有效时长，每发送一次心跳包可使token的有效时长延长30分钟。

![](/assets/https请求.png)

二、S系列IPPBX主动向服务器推送消息

应用服务器作为服务端，S系列IPPBX为客户端。

条件：应用服务器需通过S系列IPPBX  API的验证，和S系列IPPBX  API建立连接。

以下为该种方式交互的使用场景：S系列IPPBX向应用服务器推送分机振铃等状态。

![](/assets/https报告.png)

